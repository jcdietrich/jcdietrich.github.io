<html>
    <head>
        <style>
            @font-face {font-family: linjasike; src: url(linja-sike-beta-2-for-u.otf)}
            #text {font-size:400%; font-family: linjasike;}
            #canvas {border-style: dashed;}
        </style>
    </head>
    <body>
        <fieldset>
            <label>
                <input id="preview" type="checkbox" spellcheck="false" onclick="setPreview(this);" checked="true" />
                preview toki pona
            </label>
            <label><input id="shadow" type="checkbox" />drop shadow</label>
            <label><input id="stroke" type="checkbox" />white stroke</label>
        </fieldset>
        <textarea id="text">toki pona</textarea>
        <button id="go" onclick="draw()">go</button>
        <canvas id="canvas"></canvas>
        <script>
            const text = document.getElementById('text');
            const canvas = document.getElementById('canvas');
            const setPreview = preview => {
                if (preview.checked){
                    text.style.fontFamily = 'linjasike';
                } else {
                    text.style.fontFamily = 'arial';
                }
            };

            const draw = () => {
                ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.font = '48px linjasike';
                ctx.fillText(text.value, 0,48);
                metrics = ctx.measureText(text.value);
                canvas.width = metrics.width + 10;
                canvas.height = 75;
                ctx.font = '48px linjasike';
                if (document.getElementById('shadow').checked) {
                    ctx.shadowOffsetX = 3;
                    ctx.shadowOffsetY = 3;
                    ctx.shadowColor = "rgba(0,0,0,0.3)";
                    ctx.shadowBlur = 4;
                };
                if (document.getElementById('stroke').checked){
                    ctx.strokeStyle = 'white';
                    ctx.lineWidth = 4;
                    ctx.strokeText(text.value, 0, 48);
                };
                ctx.fillText(text.value, 0,48);
            }
        </script>
    </body>
</html>
